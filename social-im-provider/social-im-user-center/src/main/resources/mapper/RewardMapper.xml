<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="com.enuos.live.mapper.RewardMapper">

    <!--获取签到奖励-->
    <select id="getSignReward" resultType="java.util.Map">
        select
        t1.title,
        t1.icon_url iconUrl,
        t1.background_url backgroundUrl,
        t1.category,
        t1.code taskCode,

        t2.life,
        t2.number,
        t2.suffix,

        t3.code rewardCode,
        t3.name rewardName,
        t3.description,
        t3.url,
        t3.category_id categoryId

        from tb_task t1
        left join tb_task_reward t2 on t2.task_code = t1.code
        left join tb_reward t3 on t3.code = t2.reward_code
        where t1.category in (1, 2)
    </select>

    <!--获取奖励-->
    <select id="getRewardByCode" resultType="java.util.Map">
        select
        t1.reward_code rewardCode,
        t1.number,
        t1.life,

        t2.name rewardName,
        t2.url,
        t2.category_id categoryId
        from tb_task_reward t1
        left join tb_reward t2 on t2.code = t1.reward_code
        where t1.task_code = #{taskCode} and t1.suffix = #{suffix}
        order by t1.id
    </select>

    <!--获取奖励-->
    <select id="getRewardByCodeForMap" resultType="java.util.Map">
        select
        t1.reward_code rewardCode,
        t1.life,
        t1.number,
        t2.url,
        t2.category_id categoryId
        from tb_task_reward t1
        left join tb_reward t2 on t2.code = t1.reward_code
        where t1.task_code = #{taskCode} and t1.suffix = #{suffix}
    </select>
</mapper>