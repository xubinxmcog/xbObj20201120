<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="com.enuos.live.mapper.WeChatMapper">
    <!--获取openId-->
    <select id="getWeChat" parameterType="java.lang.Long" resultType="com.enuos.live.pojo.WeChat">
        select user_id, union_id, open_id, nick_name weChatNickName from platform_wechat where user_id = #{userId}
    </select>
    
    <!--授权微信支付-->
    <insert id="save" parameterType="com.enuos.live.pojo.WeChat" useGeneratedKeys="true">
         insert into platform_wechat (user_id, union_id, open_id, nick_name) values (#{userId}, #{unionId}, #{openId}, #{weChatNickName})
    </insert>
</mapper>